<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙƒØªØ¨Ø© - Ø¹Ø±Ø¶ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØªØ¨</title>
    <meta name="description" content="Ø¹Ø±Ø¶ ÙˆØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØªØ¨Ø©">
    
    <!-- Bootstrap RTL CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    
    <!-- Arabic Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Background & Surface Colors */
            --background: hsl(218, 100%, 97%);
            --foreground: hsl(215, 25%, 15%);
            --surface: hsl(0, 0%, 100%);
            --surface-alt: hsl(220, 15%, 96%);

            /* Brand Colors */
            --primary: hsl(215, 90%, 52%);
            --primary-foreground: hsl(0, 0%, 100%);
            --primary-light: hsl(215, 85%, 65%);
            --primary-dark: hsl(215, 95%, 42%);

            /* Secondary Brand */
            --secondary: hsl(195, 85%, 48%);
            --secondary-foreground: hsl(0, 0%, 100%);
            --secondary-light: hsl(195, 80%, 65%);

            /* Accent Colors */
            --accent: hsl(275, 75%, 55%);
            --success: hsl(142, 76%, 45%);
            --warning: hsl(38, 92%, 55%);
            --destructive: hsl(0, 84%, 60%);

            /* Neutral Colors */
            --muted: hsl(220, 15%, 94%);
            --muted-foreground: hsl(215, 16%, 47%);
            --border: hsl(220, 13%, 88%);

            /* Shadows */
            --shadow-soft: 0 2px 8px -2px hsl(215, 25%, 15%, 0.08);
            --shadow-medium: 0 4px 16px -4px hsl(215, 25%, 15%, 0.12);
            --shadow-large: 0 8px 32px -8px hsl(215, 25%, 15%, 0.16);
            --shadow-glow: 0 0 32px hsl(215, 90%, 52%, 0.3);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background);
            color: var(--foreground);
            line-height: 1.6;
        }

        /* Custom utility classes */
        .gradient-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .gradient-secondary {
            background: linear-gradient(135deg, var(--accent), var(--primary));
        }
        
        .gradient-success {
            background: linear-gradient(135deg, var(--success), hsl(155, 70%, 55%));
        }
        
        .gradient-surface {
            background: linear-gradient(180deg, var(--surface), var(--surface-alt));
        }
        
        .shadow-soft { box-shadow: var(--shadow-soft); }
        .shadow-medium { box-shadow: var(--shadow-medium); }
        .shadow-large { box-shadow: var(--shadow-large); }
        .shadow-glow { box-shadow: var(--shadow-glow); }
        
        .transition-smooth {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Navigation */
        .navbar {
            top: 10px;
            right: 10px;
            left: 10px;
            border-radius: 1rem;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-large);
        }

        .navbar-brand img {
            border-radius: 50%;
        }

        /* Container */
        .container {
            padding-top: 100px;
        }

        /* Cards */
        .card {
            background-color: var(--surface);
            border: 1px solid var(--border);
            border-radius: 1rem;
            box-shadow: var(--shadow-soft);
            transition: var(--transition-smooth);
        }

        .card:hover {
            box-shadow: var(--shadow-medium);
        }

        /* Table Styling */
        .table {
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .table-hover tbody tr:hover {
            background-color: var(--muted);
            transition: var(--transition-smooth);
        }

        /* Modal Styling */
        .modal-content {
            border-radius: 1rem;
            box-shadow: var(--shadow-large);
        }

        .modal-header {
            border-bottom: 1px solid var(--border);
            border-radius: 1rem 1rem 0 0;
        }

        .modal-footer {
            border-top: 1px solid var(--border);
            border-radius: 0 0 1rem 1rem;
        }

        /* Tabs */
        .nav-tabs .nav-link {
            border: none;
            color: var(--muted-foreground);
            font-weight: 500;
        }

        .nav-tabs .nav-link.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white !important;
            border-radius: 0.75rem 0.75rem 0 0;
        }

        .nav-tabs .nav-link:hover {
            color: var(--primary);
        }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), hsl(155, 70%, 55%));
            border: none;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), hsl(38, 85%, 65%));
            border: none;
            color: #000;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--secondary), hsl(195, 80%, 60%));
            border: none;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container { padding-top: 120px; }
            .navbar { position: relative; top: 0; margin: 10px; }
            .table-responsive { font-size: 0.875rem; }
        }

        /* Print styles (for consistency) */
        @media print {
            body * { visibility: hidden; }
            #booksTable, #booksTable * { visibility: visible; }
            #booksTable { position: absolute; top: 0; left: 0; width: 100%; padding: 20px; }
            .no-print { display: none !important; }
            .navbar { display: none !important; }
            .modal { display: none !important; }
        }
    </style>
</head>

<body>
  <nav
    class="navbar navbar-expand-lg navbar-dark bg-dark py-3 px-4 rounded-3 shadow-lg"
  >
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">
        <img
          src="./slogan.png"
          alt="Logo"
          class="rounded-circle me-2"
          width="64px"
          height="64px"
        />
        Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div
        class="collapse navbar-collapse justify-content-center"
        id="navbarNavDropdown"
      >
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="add-book.html">ğŸ“š Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="update-books.html">ğŸ“– Ø¹Ø±Ø¶ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØªØ¨</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="advanced-search.html">ğŸ” Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="reports.html"
              >ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link active"
              aria-current="page"
              href="delete-books.html"
              >ğŸ—‘ï¸ Ø­Ø°Ù ÙƒØªØ§Ø¨</a
            >
          </li>
        </ul>
      </div>
    </div>
  </nav>

    <div class="container mt-4">

        <!-- Page Header -->
        <div class="mb-5">
            <h1 class="display-5 fw-bold text-primary mb-2 d-flex align-items-center gap-3">
                ğŸ“– Ø¹Ø±Ø¶ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØªØ¨
            </h1>
            <p class="text-muted fs-5">Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ ÙˆØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ø¨Ø³Ù‡ÙˆÙ„Ø©</p>
        </div>
                <!-- Ø²Ø± Ø§Ù„Ø¨Ø­Ø« -->


 <!-- Ø®Ø§Ù†Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ -->
      <div class="mb-3 d-flex gap-2 align-items-center">
        <select
          id="searchType"
          class="form-select w-auto"
          style="min-width: 160px"
        >
          <option value="title">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</option>
          <option value="author">Ø§Ù„Ù…Ø¤Ù„Ù</option>
          <option value="classification">Ø±Ù…Ø² Ø§Ù„ØªØµÙ†ÙŠÙ</option>
          <option value="publisher">Ø§Ù„Ù†Ø§Ø´Ø±</option>
          <option value="year">Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø±</option>
        </select>
        <input
          type="text"
          id="searchInput"
          class="form-control"
          placeholder="ğŸ” Ø§ÙƒØªØ¨ Ù„Ù„Ø¨Ø­Ø«..."
          style="max-width: 350px"
        />
      </div>


        <!-- Books Table -->
        <div class="card shadow-medium">
            <div class="card-header">
                <h5 class="mb-0">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover table-striped table-bordered align-middle mb-0" id="booksTable">
                        <thead class="table-dark">
                            <tr>
                                <th class="text-center">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ</th>
                                <th class="text-center">Ø±Ù…Ø² Ø§Ù„ØªØµÙ†ÙŠÙ</th>
                                <th class="text-center">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                                <th class="text-center">Ø§Ù„Ù…Ø¤Ù„ÙÙˆÙ†</th>
                                <th class="text-center">Ø§Ù„Ù†Ø§Ø´Ø±</th>
                                <th class="text-center">Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø±</th>
                                <th class="text-center">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª</th>
                                <th class="text-center">Ø§Ù„Ø£ÙØ¹Ø§Ù„</th>
                            </tr>
                        </thead>
                        <tbody id="booksTbody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Modal - Ù…Ø¹ Ø¥Ø±Ø¬Ø§Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ù€ Tabs Ø§Ù„Ø£ØµÙ„ÙŠ -->
    <div class="modal fade" id="bookModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-gradient-primary text-white">
                    <h5 class="modal-title" id="bookModalTitle">ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs mb-3" id="bookTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="authors-tab" data-bs-toggle="tab" data-bs-target="#authors" type="button" role="tab">Ø§Ù„Ù…Ø¤Ù„ÙÙˆÙ†</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="publish-tab" data-bs-toggle="tab" data-bs-target="#publishers" type="button" role="tab">Ø§Ù„Ù†Ø§Ø´Ø±ÙˆÙ†</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="supplier-tab" data-bs-toggle="tab" data-bs-target="#supplier" type="button" role="tab">Ø§Ù„Ù…Ø²ÙˆÙ‘Ø¯</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="review-tab" data-bs-toggle="tab" data-bs-target="#review" type="button" role="tab">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
                        <div class="tab-pane fade show active" id="info" role="tabpanel">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ</label>
                                    <input type="text" class="form-control" id="bookSerial" readonly>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø±Ù…Ø² Ø§Ù„ØªØµÙ†ÙŠÙ</label>
                                    <input type="text" class="form-control" id="bookClassification">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨</label>
                                    <input type="text" class="form-control" id="bookTitle">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                                    <select class="form-select" id="bookTitleType">
                                        <option value="">Ø§Ø®ØªØ±...</option>
                                        <option value="Ø±Ø¦ÙŠØ³ÙŠ">Ø±Ø¦ÙŠØ³ÙŠ</option>
                                        <option value="ÙØ±Ø¹ÙŠ">ÙØ±Ø¹ÙŠ</option>
                                        <option value="Ø¨Ø¯ÙŠÙ„">Ø¨Ø¯ÙŠÙ„</option>
                                        <option value="Ù…ÙˆØ§Ø²ÙŠ">Ù…ÙˆØ§Ø²ÙŠ</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Ø¹Ù†Ø§ÙˆÙŠÙ† ÙØ±Ø¹ÙŠØ©</label>
                                    <div id="bookSubTitlesContainer">
                                        <div class="input-group mb-2">
                                            <input type="text" class="form-control" name="bookSubTitles[]" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ">
                                            <select class="form-select" name="bookSubTitleType[]">
                                                <option value="">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</option>
                                                <option value="ÙØ±Ø¹ÙŠ">ÙØ±Ø¹ÙŠ</option>
                                                <option value="Ø¨Ø¯ÙŠÙ„">Ø¨Ø¯ÙŠÙ„</option>
                                                <option value="Ù…ÙˆØ§Ø²ÙŠ">Ù…ÙˆØ§Ø²ÙŠ</option>
                                            </select>
                                            <button class="btn btn-outline-secondary" type="button" onclick="addBookSubTitle(this)">+</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ÙƒØªØ§Ø¨</label>
                                    <input type="number" class="form-control" id="bookLength" min="0" placeholder="Ø§Ù„Ø·ÙˆÙ„">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ù„ÙŠÙˆØºØ±Ø§ÙÙŠ</label>
                                    <select class="form-select" id="bookBibliographicLevel">
                                        <option value="">Ø§Ø®ØªØ±...</option>
                                        <option value="ÙƒØªØ§Ø¨">ÙƒØªØ§Ø¨</option>
                                        <option value="Ù…Ø±Ø¬Ø¹">Ù…Ø±Ø¬Ø¹</option>
                                        <option value="Ù…Ø¬Ù…ÙˆØ¹Ø©">Ù…Ø¬Ù…ÙˆØ¹Ø©</option>
                                        <option value="Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù…Ø¹ÙŠØ©">Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù…Ø¹ÙŠØ©</option>
                                        <option value="ÙƒØªØ¨ Ø£Ø·ÙØ§Ù„">ÙƒØªØ¨ Ø£Ø·ÙØ§Ù„</option>
                                        <option value="Ù‚ØµØ©">Ù‚ØµØ©</option>
                                        <option value="Ø¯ÙˆØ±ÙŠØ©">Ø¯ÙˆØ±ÙŠØ©</option>
                                        <option value="Ø³Ù…Ø¹ÙŠØ§Øª-Ø¨ØµØ±ÙŠØ§Øª">Ø³Ù…Ø¹ÙŠØ§Øª-Ø¨ØµØ±ÙŠØ§Øª</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ù…Ø³ØªØ®Ù„Øµ</label>
                                    <textarea class="form-control" id="bookAbstract" rows="3"></textarea>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ø¥ÙŠØ¶Ø§Ø­Ø§Øª</label>
                                    <textarea class="form-control" id="bookExplanations" rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Ø§Ù„Ù…Ø¤Ù„ÙÙˆÙ† -->
                        <div class="tab-pane fade" id="authors" role="tabpanel">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label">Ù†ÙˆØ¹ / Ø¯ÙˆØ± Ø§Ù„Ù…Ø¤Ù„Ù</label>
                                    <div id="bookAuthorsContainer">
                                        <div class="input-group mb-2">
                                            <select class="form-select" name="bookAuthorRole[]">
                                                <option value="">Ø§Ø®ØªØ±...</option>
                                                <option value="Ø±Ø¦ÙŠØ³ÙŠ">Ø±Ø¦ÙŠØ³ÙŠ</option>
                                                <option value="Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø´Ø§Ø±Ùƒ">Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø´Ø§Ø±Ùƒ</option>
                                                <option value="Ù…ØªØ±Ø¬Ù…">Ù…ØªØ±Ø¬Ù…</option>
                                                <option value="Ù…Ø­Ù‚Ù‚">Ù…Ø­Ù‚Ù‚</option>
                                                <option value="Ù…Ø¯Ù‚Ù‚">Ù…Ø¯Ù‚Ù‚</option>
                                                <option value="Ù…Ø±Ø§Ø¬Ø¹">Ù…Ø±Ø§Ø¬Ø¹</option>
                                                <option value="Ù…Ø­Ø±Ø±">Ù…Ø­Ø±Ø±</option>
                                                <option value="Ù…Ø¹Ø¯">Ù…Ø¹Ø¯</option>
                                                <option value="Ù…Ù‚Ø¯Ù‘Ù…">Ù…Ù‚Ø¯Ù‘Ù…</option>
                                            </select>
                                            <input type="text" class="form-control" name="bookAuthorName[]" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ù„Ù">
                                            <select class="form-select" name="bookAuthorAttribute[]">
                                                <option value="">ØµÙØ© Ø§Ù„Ù…Ø¤Ù„Ù</option>
                                                <option value="Ø´Ø®Øµ">Ø´Ø®Øµ</option>
                                                <option value="Ù…Ù„ØªÙ‚Ù‰">Ù…Ù„ØªÙ‚Ù‰</option>
                                                <option value="Ù‡ÙŠØ¦Ø©">Ù‡ÙŠØ¦Ø©</option>
                                                <option value="Ø¹Ù†ÙˆØ§Ù†">Ø¹Ù†ÙˆØ§Ù†</option>
                                            </select>
                                            <button class="btn btn-outline-secondary" type="button" onclick="addBookAuthor(this)">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ø§Ù„Ù†Ø§Ø´Ø±ÙˆÙ† -->
                        <div class="tab-pane fade" id="publishers" role="tabpanel">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø´Ø±</label>
                                    <div id="bookPublishersContainer">
                                        <div class="input-group mb-2">
                                            <input type="text" class="form-control" name="bookPublishers[]" placeholder="Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø´Ø±">
                                            <input type="text" class="form-control" name="bookPublisherPlace[]" placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù†Ø´Ø±">
                                            <span class="input-group-text">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±</span>
                                            <input type="date" class="form-control" name="bookPublisherDate[]">
                                            <button class="btn btn-outline-secondary" type="button" onclick="addBookPublisher(this)">+</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ø·Ø¨Ø¹Ø©</label>
                                    <input type="text" class="form-control" id="bookEdition">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø±Ù‚Ù… ISBN</label>
                                    <input type="text" class="form-control" id="bookISBN">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</label>
                                    <input type="text" class="form-control" id="bookDepositNumber">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª</label>
                                    <input type="number" class="form-control" id="bookPagesCount" min="1">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ø³Ù„Ø³Ù„Ø©</label>
                                    <input type="text" class="form-control" id="bookSeries">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡</label>
                                    <input type="number" class="form-control" id="bookParts" min="1">
                                </div>
                            </div>
                        </div>

                        <!-- Ø§Ù„Ù…Ø²ÙˆØ¯ -->
                        <div class="tab-pane fade" id="supplier" role="tabpanel">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ²ÙˆÙŠØ¯</label>
                                    <input type="date" class="form-control" id="bookSupplyDate">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯</label>
                                    <select id="bookSupplyMethod" class="form-select" onchange="toggleBookPriceField()">
                                        <option value="">Ø§Ø®ØªØ±...</option>
                                        <option value="Ø´Ø±Ø§Ø¡">Ø´Ø±Ø§Ø¡</option>
                                        <option value="Ø¥Ù‡Ø¯Ø§Ø¡">Ø¥Ù‡Ø¯Ø§Ø¡</option>
                                        <option value="ØªØ¨Ø§Ø¯Ù„">ØªØ¨Ø§Ø¯Ù„</option>
                                    </select>
                                </div>
                                <div class="col-md-6" id="bookPriceField" style="display: none">
                                    <label class="form-label">Ø§Ù„Ø³Ø¹Ø±</label>
                                    <input type="number" class="form-control" id="bookPrice" step="0.01" min="0">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Ø§Ù„Ù‚Ø³Ù…</label>
                                    <select id="bookDepartment" class="form-select">
                                        <option value="">Ø§Ø®ØªØ±...</option>
                                        <option value="Ø£Ø¯Ø¨">Ø£Ø¯Ø¨</option>
                                        <option value="ØªØ§Ø±ÙŠØ®">ØªØ§Ø±ÙŠØ®</option>
                                        <option value="Ø¹Ù„ÙˆÙ…">Ø¹Ù„ÙˆÙ…</option>
                                        <option value="ÙÙ„Ø³ÙØ©">ÙÙ„Ø³ÙØ©</option>
                                        <option value="Ø¯ÙŠÙ†">Ø¯ÙŠÙ†</option>
                                        <option value="Ø³ÙŠØ§Ø³Ø©">Ø³ÙŠØ§Ø³Ø©</option>
                                        <option value="Ø§Ù‚ØªØµØ§Ø¯">Ø§Ù‚ØªØµØ§Ø¯</option>
                                        <option value="Ø¬ØºØ±Ø§ÙÙŠØ§">Ø¬ØºØ±Ø§ÙÙŠØ§</option>
                                        <option value="Ø£Ø·ÙØ§Ù„">Ø£Ø·ÙØ§Ù„</option>
                                        <option value="Ù…Ø±Ø§Ø¬Ø¹">Ù…Ø±Ø§Ø¬Ø¹</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <label class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                                    <textarea class="form-control" id="bookNotes" rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
                        <div class="tab-pane fade" id="review" role="tabpanel">
                            <div class="p-3 bg-light rounded" id="reviewContent">
                                <h6>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©:</h6>
                                <div class="alert alert-info">ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
                                <div id="bookDataReview"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="button" class="btn btn-success gradient-success shadow-medium fw-bold" id="saveBookBtn" onclick="saveBook()">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù„ÙˆÙ† ÙÙ‚Ø· Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    const currentPage = window.location.pathname.split("/").pop();
    const navLinks = document.querySelectorAll('.navbar-nav .nav-link');

    navLinks.forEach(link => {
        if(link.getAttribute('href') === currentPage){
            link.classList.add('active'); // ÙŠØ¸Ù„ Ø£Ø¨ÙŠØ¶ ØºØ§Ù…Ù‚ ÙÙ‚Ø· Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ
        } else {
            link.classList.remove('active');
        }
    });
</script>

    <script>
        let booksData = [
            { 
                serial: '1', 
                classification: '001.23', 
                title: 'Ù…Ø¯Ø®Ù„ Ø¥Ù„Ù‰ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨', 
                authors: [
                    { role: 'Ø±Ø¦ÙŠØ³ÙŠ', name: 'Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ', attribute: 'Ø´Ø®Øµ' },
                    { role: 'Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø´Ø§Ø±Ùƒ', name: 'Ø³Ø§Ø±Ø© Ø­Ø³ÙŠÙ†', attribute: 'Ø´Ø®Øµ' }
                ],
                publishers: [
                    { name: 'Ø¯Ø§Ø± Ø§Ù„ÙÙƒØ±', place: 'Ø¯Ù…Ø´Ù‚', date: '2020-05-01' },
                    { name: 'Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù†ÙˆØ±', place: 'Ø¨ÙŠØ±ÙˆØª', date: '2020-05-01' }
                ],
                subTitle: [
                    { text: 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†', type: 'ÙØ±Ø¹ÙŠ' }
                ],
                titleType: 'Ø±Ø¦ÙŠØ³ÙŠ',
                abstract: 'ÙƒØªØ§Ø¨ ØªØ¹Ù„ÙŠÙ…ÙŠ Ø´Ø§Ù…Ù„ Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨',
                explanations: 'Ø¥ÙŠØ¶Ø§Ø­Ø§Øª Ù…Ù‡Ù…Ø© Ù„Ù„Ø·Ù„Ø§Ø¨',
                length: '25',
                bibliographicLevel: 'ÙƒØªØ§Ø¨',
                edition: 'Ø§Ù„Ø£ÙˆÙ„Ù‰',
                ISBN: '978-3-16-148410-0',
                depositNumber: 'D12345',
                pagesCount: '300',
                series: 'Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„ØªÙ‚Ù†ÙŠ',
                parts: '1',
                supplyDate: '2020-05-01',
                supplyMethod: 'Ø´Ø±Ø§Ø¡',
                price: '50',
                department: 'Ø¹Ù„ÙˆÙ…',
                notes: 'Ù†Ø³Ø®Ø© Ù…Ø¯Ø±Ø³ÙŠØ©'
            },
            { 
                serial: '2', 
                classification: '005.12', 
                title: 'Ø£Ø³Ø§Ø³ÙŠØ§Øª Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 
                authors: [
                    { role: 'Ø±Ø¦ÙŠØ³ÙŠ', name: 'Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†', attribute: 'Ø´Ø®Øµ' }
                ],
                publishers: [
                    { name: 'Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„', place: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©', date: '2021-03-10' }
                ],
                subTitle: [],
                titleType: 'Ø±Ø¦ÙŠØ³ÙŠ',
                abstract: 'ÙƒØªØ§Ø¨ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù…ØªÙ‚Ø¯Ù…',
                explanations: 'Ø¥ÙŠØ¶Ø§Ø­Ø§Øª Ù…Ù‡Ù…Ø©',
                length: '20',
                bibliographicLevel: 'ÙƒØªØ§Ø¨',
                edition: 'Ø§Ù„Ø£ÙˆÙ„Ù‰',
                ISBN: '978-3-16-148410-1',
                depositNumber: 'D12346',
                pagesCount: '250',
                series: '',
                parts: '1',
                supplyDate: '2021-03-10',
                supplyMethod: 'Ø¥Ù‡Ø¯Ø§Ø¡',
                price: '0',
                department: 'Ø¹Ù„ÙˆÙ…',
                notes: 'Ù†Ø³Ø®Ø© Ù„Ù„Ù…Ø¹Ø§Ù…Ù„'
            }
        ];

        function renderTable(){
            const tbody = document.getElementById('booksTbody');
            tbody.innerHTML = '';
            booksData.forEach((book, idx) => {
                tbody.innerHTML += `
                <tr>
                    <td class="text-center">${book.serial}</td>
                    <td class="text-center">${book.classification}</td>
                    <td>${book.title}</td>
                    <td>${book.authors.map(a => a.name).join('ØŒ ')}</td>
                    <td>${book.publishers.map(p => p.name).join('Ø› ')}</td>
                    <td class="text-center">${book.publishers[0]?.date?.split('-')[0] || ''}</td>
                    <td class="text-center">${book.pagesCount}</td>
                    <td class="text-center">
                        <button class="btn btn-warning btn-sm me-1" onclick="editBook(${idx})">
                            âœï¸ ØªØ¹Ø¯ÙŠÙ„
                        </button>
                        <button class="btn btn-info btn-sm me-1" onclick="viewBook(${idx})">
                            ğŸ‘ï¸ Ø¹Ø±Ø¶
                        </button>
                        <div class="btn-group">
                            <button class="btn btn-success btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                â• Ø¥Ø¶Ø§ÙØ©
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="addCopy(${idx}); event.stopPropagation();">Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø®Ø©</a></li>
                                <li><a class="dropdown-item" href="#" onclick="addPart(${idx}); event.stopPropagation();">Ø¥Ø¶Ø§ÙØ© Ø¬Ø²Ø¡</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>`;
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
        });

        let currentIdx = null;
function editBook(idx){
    currentIdx = idx; // Ø¹Ø´Ø§Ù† Ù†Ø¹Ø±Ù Ø£ÙŠ ÙƒØªØ§Ø¨ Ø¨Ù†Ø¹Ø¯Ù„

    const book = booksData[idx];
    fillBookForm(book); // ØªØ¹Ø¨ÙŠØ© Ø§Ù„ÙÙˆØ±Ù…

    // ğŸŸ¢ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¨Ù†ÙØ³ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶
    showBookDataSummary(book);

    // Ø¥Ø¸Ù‡Ø§Ø± ÙƒÙ„ Ø§Ù„ØªØ§Ø¨Ø§Øª
    document.querySelectorAll('#bookTabs .nav-item').forEach(item => {
        item.style.display = 'block';
    });

    // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù„Ø£ÙˆÙ„ ØªØ§Ø¨ (Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)
    const infoTab = document.querySelector('#info-tab');
    new bootstrap.Tab(infoTab).show();

    // ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    document.getElementById('bookModalTitle').innerText = 'ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨';

    // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø­ÙØ¸
    document.getElementById('saveBookBtn').style.display = 'inline-block';

    // ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    new bootstrap.Modal(document.getElementById('bookModal')).show();
}

function addCopy(idx){
    currentIdx = null;
    fillBookForm(booksData[idx]);
    document.getElementById('bookModalTitle').innerText = 'Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©';
    document.getElementById('saveBookBtn').style.display = 'inline-block'; // ÙŠØ¸Ù‡Ø± Ø§Ù„Ø²Ø±
    new bootstrap.Modal(document.getElementById('bookModal')).show();
}

function addPart(idx){
    currentIdx = null;
    fillBookForm(booksData[idx]);
    document.getElementById('bookModalTitle').innerText = 'Ø¥Ø¶Ø§ÙØ© Ø¬Ø²Ø¡ Ø¬Ø¯ÙŠØ¯';
    document.getElementById('saveBookBtn').style.display = 'inline-block'; // ÙŠØ¸Ù‡Ø± Ø§Ù„Ø²Ø±
    new bootstrap.Modal(document.getElementById('bookModal')).show();
}


 // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨
function viewBook(idx){
    const book = booksData[idx];
    showBookDataSummary(book);

    // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„ØªØ§Ø¨Ø§Øª Ù…Ø§ Ø¹Ø¯Ø§ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    document.querySelectorAll('#bookTabs .nav-item').forEach(item => {
        item.style.display = 'none';
    });
    document.getElementById('review-tab').parentElement.style.display = 'block';

    // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
    const reviewTab = document.querySelector('#review-tab');
    new bootstrap.Tab(reviewTab).show();

    // ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    document.getElementById('bookModalTitle').innerText = 'Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨';

    // Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø­ÙØ¸
    document.getElementById('saveBookBtn').style.display = 'none';

    // ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    new bootstrap.Modal(document.getElementById('bookModal')).show();
}


function filterBooks() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const tbody = document.getElementById('booksTbody');
    tbody.innerHTML = '';

    booksData.forEach((book, idx) => {
        const title = book.title.toLowerCase();
        const authors = book.authors.map(a => a.name.toLowerCase()).join(' ');
        const publishers = book.publishers.map(p => p.name.toLowerCase()).join(' ');
        
        if(title.includes(query) || authors.includes(query) || publishers.includes(query)) {
            tbody.innerHTML += `
            <tr>
                <td class="text-center">${book.serial}</td>
                <td class="text-center">${book.classification}</td>
                <td>${book.title}</td>
                <td>${book.authors.map(a => a.name).join('ØŒ ')}</td>
                <td>${book.publishers.map(p => p.name).join('Ø› ')}</td>
                <td class="text-center">${book.publishers[0]?.date?.split('-')[0] || ''}</td>
                <td class="text-center">${book.pagesCount}</td>
                <td class="text-center">
                    <button class="btn btn-warning btn-sm me-1" onclick="editBook(${idx})">
                        âœï¸ ØªØ¹Ø¯ÙŠÙ„
                    </button>
                    <button class="btn btn-info btn-sm me-1" onclick="viewBook(${idx})">
                        ğŸ‘ï¸ Ø¹Ø±Ø¶
                    </button>
                    <div class="btn-group">
                        <button class="btn btn-success btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            â• Ø¥Ø¶Ø§ÙØ©
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="addCopy(${idx}); event.stopPropagation();">Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø®Ø©</a></li>
                            <li><a class="dropdown-item" href="#" onclick="addPart(${idx}); event.stopPropagation();">Ø¥Ø¶Ø§ÙØ© Ø¬Ø²Ø¡</a></li>
                        </ul>
                    </div>
                </td>
            </tr>`;
        }
    });
}


        function fillBookForm(book){
            // Basic Info
            document.getElementById('bookSerial').value = book.serial;
            document.getElementById('bookClassification').value = book.classification;
            document.getElementById('bookTitle').value = book.title;
            document.getElementById('bookTitleType').value = book.titleType || '';
            document.getElementById('bookLength').value = book.length || '';
            document.getElementById('bookBibliographicLevel').value = book.bibliographicLevel || '';
            document.getElementById('bookAbstract').value = book.abstract || '';
            document.getElementById('bookExplanations').value = book.explanations || '';

            // Clear and refill Sub Titles
            const subTitlesContainer = document.getElementById('bookSubTitlesContainer');
            subTitlesContainer.innerHTML = '';
            if (book.subTitle && book.subTitle.length > 0) {
                book.subTitle.forEach(st => {
                    addSubTitleField(subTitlesContainer, st.text, st.type);
                });
            } else {
                addSubTitleField(subTitlesContainer);
            }

            // Authors
            const authorsContainer = document.getElementById('bookAuthorsContainer');
            authorsContainer.innerHTML = '';
            if (book.authors && book.authors.length > 0) {
                book.authors.forEach(author => {
                    addAuthorField(authorsContainer, author.role, author.name, author.attribute);
                });
            } else {
                addAuthorField(authorsContainer);
            }

            // Publishers
            const publishersContainer = document.getElementById('bookPublishersContainer');
            publishersContainer.innerHTML = '';
            if (book.publishers && book.publishers.length > 0) {
                book.publishers.forEach(pub => {
                    addPublisherField(publishersContainer, pub.name, pub.place, pub.date);
                });
            } else {
                addPublisherField(publishersContainer);
            }

            // Publishing Info
            document.getElementById('bookEdition').value = book.edition || '';
            document.getElementById('bookISBN').value = book.ISBN || '';
            document.getElementById('bookDepositNumber').value = book.depositNumber || '';
            document.getElementById('bookPagesCount').value = book.pagesCount || '';
            document.getElementById('bookSeries').value = book.series || '';
            document.getElementById('bookParts').value = book.parts || '';

            // Supplier Info
            document.getElementById('bookSupplyDate').value = book.supplyDate || '';
            document.getElementById('bookSupplyMethod').value = book.supplyMethod || '';
            if (book.supplyMethod === 'Ø´Ø±Ø§Ø¡') {
                document.getElementById('bookPriceField').style.display = 'block';
            } else {
                document.getElementById('bookPriceField').style.display = 'none';
            }
            document.getElementById('bookPrice').value = book.price || '';
            document.getElementById('bookDepartment').value = book.department || '';
            document.getElementById('bookNotes').value = book.notes || '';
        }

        function addSubTitleField(container, text = '', type = '') {
            const div = document.createElement("div");
            div.className = "input-group mb-2";
            div.innerHTML = `
                <input type="text" class="form-control" name="bookSubTitles[]" value="${text}" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ">
                <select class="form-select" name="bookSubTitleType[]">
                    <option value="">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</option>
                    <option value="Ø±Ø¦ÙŠØ³ÙŠ" ${type === 'Ø±Ø¦ÙŠØ³ÙŠ' ? 'selected' : ''}>Ø±Ø¦ÙŠØ³ÙŠ</option>
                    <option value="ÙØ±Ø¹ÙŠ" ${type === 'ÙØ±Ø¹ÙŠ' ? 'selected' : ''}>ÙØ±Ø¹ÙŠ</option>
                    <option value="Ø¨Ø¯ÙŠÙ„" ${type === 'Ø¨Ø¯ÙŠÙ„' ? 'selected' : ''}>Ø¨Ø¯ÙŠÙ„</option>
                    <option value="Ù…ÙˆØ§Ø²ÙŠ" ${type === 'Ù…ÙˆØ§Ø²ÙŠ' ? 'selected' : ''}>Ù…ÙˆØ§Ø²ÙŠ</option>
                </select>
                <button class="btn btn-outline-danger" type="button" onclick="this.parentNode.remove()">-</button>
            `;
            container.appendChild(div);
        }

        function addAuthorField(container, role = '', name = '', attribute = '') {
            const div = document.createElement("div");
            div.className = "input-group mb-2";
            div.innerHTML = `
                <select class="form-select" name="bookAuthorRole[]">
                    <option value="">Ø§Ø®ØªØ±...</option>
                    <option value="Ø±Ø¦ÙŠØ³ÙŠ" ${role === 'Ø±Ø¦ÙŠØ³ÙŠ' ? 'selected' : ''}>Ø±Ø¦ÙŠØ³ÙŠ</option>
                    <option value="Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø´Ø§Ø±Ùƒ" ${role === 'Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø´Ø§Ø±Ùƒ' ? 'selected' : ''}>Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø´Ø§Ø±Ùƒ</option>
                    <option value="Ù…ØªØ±Ø¬Ù…" ${role === 'Ù…ØªØ±Ø¬Ù…' ? 'selected' : ''}>Ù…ØªØ±Ø¬Ù…</option>
                    <option value="Ù…Ø­Ù‚Ù‚" ${role === 'Ù…Ø­Ù‚Ù‚' ? 'selected' : ''}>Ù…Ø­Ù‚Ù‚</option>
                    <option value="Ù…Ø¯Ù‚Ù‚" ${role === 'Ù…Ø¯Ù‚Ù‚' ? 'selected' : ''}>Ù…Ø¯Ù‚Ù‚</option>
                    <option value="Ù…Ø±Ø§Ø¬Ø¹" ${role === 'Ù…Ø±Ø§Ø¬Ø¹' ? 'selected' : ''}>Ù…Ø±Ø§Ø¬Ø¹</option>
                    <option value="Ù…Ø­Ø±Ø±" ${role === 'Ù…Ø­Ø±Ø±' ? 'selected' : ''}>Ù…Ø­Ø±Ø±</option>
                    <option value="Ù…Ø¹Ø¯" ${role === 'Ù…Ø¹Ø¯' ? 'selected' : ''}>Ù…Ø¹Ø¯</option>
                    <option value="Ù…Ù‚Ø¯Ù‘Ù…" ${role === 'Ù…Ù‚Ø¯Ù‘Ù…' ? 'selected' : ''}>Ù…Ù‚Ø¯Ù‘Ù…</option>
                </select>
                <input type="text" class="form-control" name="bookAuthorName[]" value="${name}" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ù„Ù">
                <select class="form-select" name="bookAuthorAttribute[]">
                    <option value="">ØµÙØ© Ø§Ù„Ù…Ø¤Ù„Ù</option>
                    <option value="Ø´Ø®Øµ" ${attribute === 'Ø´Ø®Øµ' ? 'selected' : ''}>Ø´Ø®Øµ</option>
                    <option value="Ù…Ù„ØªÙ‚Ù‰" ${attribute === 'Ù…Ù„ØªÙ‚Ù‰' ? 'selected' : ''}>Ù…Ù„ØªÙ‚Ù‰</option>
                    <option value="Ù‡ÙŠØ¦Ø©" ${attribute === 'Ù‡ÙŠØ¦Ø©' ? 'selected' : ''}>Ù‡ÙŠØ¦Ø©</option>
                    <option value="Ø¹Ù†ÙˆØ§Ù†" ${attribute === 'Ø¹Ù†ÙˆØ§Ù†' ? 'selected' : ''}>Ø¹Ù†ÙˆØ§Ù†</option>
                </select>
                <button class="btn btn-outline-danger" type="button" onclick="this.parentNode.remove()">-</button>
            `;
            container.appendChild(div);
        }

        function addPublisherField(container, name = '', place = '', date = '') {
            const div = document.createElement("div");
            div.className = "input-group mb-2";
            div.innerHTML = `
                <input type="text" class="form-control" name="bookPublishers[]" value="${name}" placeholder="Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø´Ø±">
                <input type="text" class="form-control" name="bookPublisherPlace[]" value="${place}" placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ù†Ø´Ø±">
                <input type="date" class="form-control" name="bookPublisherDate[]" value="${date}" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±">
                <button class="btn btn-outline-danger" type="button" onclick="this.parentNode.remove()">-</button>
            `;
            container.appendChild(div);
        }

        function addBookSubTitle(button) {
            const container = document.getElementById('bookSubTitlesContainer');
            addSubTitleField(container);
        }

        function addBookAuthor(button) {
            const container = document.getElementById('bookAuthorsContainer');
            addAuthorField(container);
        }

        function addBookPublisher(button) {
            const container = document.getElementById('bookPublishersContainer');
            addPublisherField(container);
        }

        function toggleBookPriceField() {
            const val = document.getElementById("bookSupplyMethod").value;
            const priceField = document.getElementById("bookPriceField");
            if (val === "Ø´Ø±Ø§Ø¡") priceField.style.display = "block";
            else { 
                priceField.style.display = "none"; 
                document.getElementById("bookPrice").value = ""; 
            }
        }

        function showBookDataSummary(book) {
            let html = "";
            
            // Basic Info
            html += `<h6>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:</h6>`;
            html += `<p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${book.title}<br>`;
            html += `<strong>Ø±Ù…Ø² Ø§Ù„ØªØµÙ†ÙŠÙ:</strong> ${book.classification}<br>`;
            if (book.subTitle && book.subTitle.length > 0) {
                html += `<strong>Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠØ©:</strong> ${book.subTitle.map(st => `${st.text} (${st.type})`).join(", ")}<br>`;
            }
            html += `<strong>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${book.titleType}<br>`;
            html += `<strong>Ø§Ù„Ù…Ø³ØªØ®Ù„Øµ:</strong> ${book.abstract}<br>`;
            html += `<strong>Ø§Ù„Ø¥ÙŠØ¶Ø§Ø­Ø§Øª:</strong> ${book.explanations}<br>`;
            html += `<strong>Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯:</strong> ${book.length} Ø³Ù…<br>`;
            html += `<strong>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ù„ÙŠÙˆØºØ±Ø§ÙÙŠ:</strong> ${book.bibliographicLevel}</p>`;

            // Authors
            if (book.authors && book.authors.length > 0) {
                html += `<h6>Ø§Ù„Ù…Ø¤Ù„ÙÙˆÙ†:</h6><p>`;
                book.authors.forEach(author => {
                    html += `${author.name} - ${author.role} - ${author.attribute}<br>`;
                });
                html += `</p>`;
            }

            // Publishers
            if (book.publishers && book.publishers.length > 0) {
                html += `<h6>Ø§Ù„Ù†Ø§Ø´Ø±ÙˆÙ†:</h6><p>`;
                book.publishers.forEach(pub => {
                    html += `${pub.name} - ${pub.place} - ${pub.date}<br>`;
                });
                html += `</p>`;
            }

            // Publishing Info
            html += `<h6>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø±:</h6><p>`;
            html += `<strong>Ø§Ù„Ø·Ø¨Ø¹Ø©:</strong> ${book.edition}<br>`;
            html += `<strong>ISBN:</strong> ${book.ISBN}<br>`;
            html += `<strong>Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹:</strong> ${book.depositNumber}<br>`;
            html += `<strong>Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª:</strong> ${book.pagesCount}<br>`;
            html += `<strong>Ø§Ù„Ø³Ù„Ø³Ù„Ø©:</strong> ${book.series}<br>`;
            html += `<strong>Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡:</strong> ${book.parts}</p>`;

            // Supplier Info
            html += `<h6>Ø§Ù„Ù…Ø²ÙˆÙ‘Ø¯:</h6><p>`;
            html += `<strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ²ÙˆÙŠØ¯:</strong> ${book.supplyMethod}<br>`;
            html += `<strong>Ø§Ù„Ø³Ø¹Ø±:</strong> ${book.price}<br>`;
            html += `<strong>Ø§Ù„Ù‚Ø³Ù…:</strong> ${book.department}<br>`;
            html += `<strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${book.notes}</p>`;

            document.getElementById("bookDataReview").innerHTML = html;
        }

        function saveBook(){
            // Collect sub titles
            const subTitles = [];
            const subTitlesInputs = document.querySelectorAll('input[name="bookSubTitles[]"]');
            const subTitleTypes = document.querySelectorAll('select[name="bookSubTitleType[]"]');
            subTitlesInputs.forEach((input, i) => {
                if (input.value.trim()) {
                    subTitles.push({
                        text: input.value,
                        type: subTitleTypes[i]?.value || ''
                    });
                }
            });

            // Collect authors
            const authors = [];
            const authorRoles = document.querySelectorAll('select[name="bookAuthorRole[]"]');
            const authorNames = document.querySelectorAll('input[name="bookAuthorName[]"]');
            const authorAttributes = document.querySelectorAll('select[name="bookAuthorAttribute[]"]');
            authorNames.forEach((input, i) => {
                if (input.value.trim()) {
                    authors.push({
                        role: authorRoles[i]?.value || '',
                        name: input.value,
                        attribute: authorAttributes[i]?.value || ''
                    });
                }
            });

            // Collect publishers
            const publishers = [];
            const publisherNames = document.querySelectorAll('input[name="bookPublishers[]"]');
            const publisherPlaces = document.querySelectorAll('input[name="bookPublisherPlace[]"]');
            const publisherDates = document.querySelectorAll('input[name="bookPublisherDate[]"]');
            publisherNames.forEach((input, i) => {
                if (input.value.trim()) {
                    publishers.push({
                        name: input.value,
                        place: publisherPlaces[i]?.value || '',
                        date: publisherDates[i]?.value || ''
                    });
                }
            });

            const book = {
                serial: document.getElementById('bookSerial').value,
                classification: document.getElementById('bookClassification').value,
                title: document.getElementById('bookTitle').value,
                titleType: document.getElementById('bookTitleType').value,
                subTitle: subTitles,
                abstract: document.getElementById('bookAbstract').value,
                explanations: document.getElementById('bookExplanations').value,
                length: document.getElementById('bookLength').value,
                bibliographicLevel: document.getElementById('bookBibliographicLevel').value,
                authors: authors,
                publishers: publishers,
                edition: document.getElementById('bookEdition').value,
                ISBN: document.getElementById('bookISBN').value,
                depositNumber: document.getElementById('bookDepositNumber').value,
                pagesCount: document.getElementById('bookPagesCount').value,
                series: document.getElementById('bookSeries').value,
                parts: document.getElementById('bookParts').value,
                supplyDate: document.getElementById('bookSupplyDate').value,
                supplyMethod: document.getElementById('bookSupplyMethod').value,
                price: document.getElementById('bookPrice').value,
                department: document.getElementById('bookDepartment').value,
                notes: document.getElementById('bookNotes').value
            };

            if(currentIdx !== null){
                booksData[currentIdx] = book;
            } else {
                book.serial = (booksData.length + 1).toString();
                booksData.push(book);
            }

            renderTable();
            bootstrap.Modal.getInstance(document.getElementById('bookModal')).hide();
        }

        // Functions for Add Copy / Part
       function addCopy(idx){
    addCopyOrPart(idx, 'Ù†Ø³Ø®Ø©');
}

function addPart(idx){
    addCopyOrPart(idx, 'Ø¬Ø²Ø¡');
}


        function addCopyOrPart(idx, type = 'Ù†Ø³Ø®Ø©') {
    currentIdx = null;
    const book = booksData[idx];

    // ğŸŸ¢ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    document.getElementById('bookSerial').value = '';
    document.getElementById('bookClassification').value = book.classification;
    document.getElementById('bookTitle').value = book.title;
    document.getElementById('bookTitleType').value = book.titleType || '';
    document.getElementById('bookLength').value = book.length || '';
    document.getElementById('bookBibliographicLevel').value = book.bibliographicLevel || '';
    document.getElementById('bookAbstract').value = book.abstract || '';
    document.getElementById('bookExplanations').value = book.explanations || '';

    // ğŸŸ¢ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙØ§Ø±ØºØ©
    document.getElementById('bookSubTitlesContainer').innerHTML = '';
    addSubTitleField(document.getElementById('bookSubTitlesContainer'));

    document.getElementById('bookAuthorsContainer').innerHTML = '';
    addAuthorField(document.getElementById('bookAuthorsContainer'));

    document.getElementById('bookPublishersContainer').innerHTML = '';
    addPublisherField(document.getElementById('bookPublishersContainer'));

    document.getElementById('bookEdition').value = '';
    document.getElementById('bookISBN').value = '';
    document.getElementById('bookDepositNumber').value = '';
    document.getElementById('bookPagesCount').value = '';
    document.getElementById('bookSeries').value = '';
    document.getElementById('bookParts').value = '';

    document.getElementById('bookSupplyDate').value = '';
    document.getElementById('bookSupplyMethod').value = '';
    document.getElementById('bookPrice').value = '';
    document.getElementById('bookDepartment').value = '';
    document.getElementById('bookNotes').value = '';

    // ğŸŸ¢ ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    document.getElementById('bookModalTitle').innerText = `Ø¥Ø¶Ø§ÙØ© ${type} Ø¬Ø¯ÙŠØ¯`;
    document.getElementById('saveBookBtn').style.display = 'inline-block';
    new bootstrap.Modal(document.getElementById('bookModal')).show();
}


        function searchBooks() {
    const title = document.getElementById('searchTitle').value.trim().toLowerCase();
    const author = document.getElementById('searchAuthor').value.trim().toLowerCase();
    const classification = document.getElementById('searchClassification').value.trim().toLowerCase();

    const filteredBooks = booksData.filter(book => {
        const matchesTitle = book.title.toLowerCase().includes(title);
        const matchesAuthor = book.authors.some(a => a.name.toLowerCase().includes(author));
        const matchesClassification = book.classification.toLowerCase().includes(classification);
        return (title ? matchesTitle : true) &&
               (author ? matchesAuthor : true) &&
               (classification ? matchesClassification : true);
    });

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    const tbody = document.getElementById('booksTbody');
    tbody.innerHTML = '';
    filteredBooks.forEach((book, idx) => {
        tbody.innerHTML += `
            <tr>
                <td class="text-center">${book.serial}</td>
                <td class="text-center">${book.classification}</td>
                <td>${book.title}</td>
                <td>${book.authors.map(a => a.name).join('ØŒ ')}</td>
                <td>${book.publishers.map(p => p.name).join('Ø› ')}</td>
                <td class="text-center">${book.publishers[0]?.date?.split('-')[0] || ''}</td>
                <td class="text-center">${book.pagesCount}</td>
                <td class="text-center">
                    <button class="btn btn-warning btn-sm me-1" onclick="editBook(${idx})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                    <button class="btn btn-info btn-sm me-1" onclick="viewBook(${idx})">ğŸ‘ï¸ Ø¹Ø±Ø¶</button>
                    <div class="btn-group">
                        <button class="btn btn-success btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">â• Ø¥Ø¶Ø§ÙØ©</button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="addCopy(${idx}); event.stopPropagation();">Ø¥Ø¶Ø§ÙØ© Ù†Ø³Ø®Ø©</a></li>
                            <li><a class="dropdown-item" href="#" onclick="addPart(${idx}); event.stopPropagation();">Ø¥Ø¶Ø§ÙØ© Ø¬Ø²Ø¡</a></li>
                        </ul>
                    </div>
                </td>
            </tr>
        `;
    });

    // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨Ø­Ø«
    bootstrap.Modal.getInstance(document.getElementById('searchBookModal')).hide();
}

    </script>
</body>
</html>