<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ุฅุฏุงุฑุฉ ุงูุฅุนุงุฑุงุช - ููุชุจุฉ ุจูุฏูุฉ ุทูููุฑู</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* ูุชุตุญูุญ ุงุชุฌุงู ุจุนุถ ุงูุนูุงุตุฑ ูู RTL ุฅู ูุฒู ุงูุฃูุฑ */
      .input-group
        > :not(:last-child):not(.dropdown-toggle):not(.dropdown-menu) {
        border-top-left-radius: 0.375rem;
        border-bottom-left-radius: 0.375rem;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      }
      .input-group
        > :not(:first-child):not(.dropdown-toggle):not(.dropdown-menu) {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        border-top-right-radius: 0.375rem;
        border-bottom-right-radius: 0.375rem;
        margin-right: -1px;
      }
      .input-group > .form-control {
        border-radius: 0.375rem;
      }
      .btn-outline-danger {
        /* ูุถูุงู ุชูุณูู ุฒุฑ ุงูุฅุฒุงูุฉ ูู ุงูู input-group */
        border-top-right-radius: 0.375rem;
        border-bottom-right-radius: 0.375rem;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
      }
    </style>
  </head>

  <body class="bg-light">
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark py-3 px-4 rounded-3 shadow-lg"
    >
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
          <img
            src="image/img.png"
            alt="Logo"
            class="rounded-circle me-2"
            width="64"
            height="64"
          />
          ุจุฑูุงูุญ ุงูุฅุนุงุฑุฉ
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          class="collapse navbar-collapse justify-content-center"
          id="navbarNavDropdown"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="index.html">๐ ุงูุฑุฆูุณูุฉ</a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="new-sub.html"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                ๐ ุงูุงุดุชุฑุงูุงุช
              </a>
              <ul class="dropdown-menu dropdown-menu-dark">
                <li>
                  <a class="dropdown-item" href="new-sub.html">ุงุดุชุฑุงู ุฌุฏูุฏ</a>
                </li>
                <li>
                  <a class="dropdown-item" href="update-sub.html"
                    >ุชุนุฏูู ุงูุงุดุชุฑุงู</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="renew-sub.html"
                    >ุชุฌุฏูุฏ ุงุดุชุฑุงู</a
                  >
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="loan.html"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                ๐ ุงูุฅุนุงุฑุงุช
              </a>
              <ul class="dropdown-menu dropdown-menu-dark">
                <li>
                  <a class="dropdown-item" href="loan.html">ุฅุนุงุฑุฉ</a>
                </li>
                <li>
                  <a class="dropdown-item" href="return-loan.html">ุฅุฑุฌุงุน</a>
                </li>
                <li>
                  <a class="dropdown-item" href="late-loan.html">ุฅุฑุฌุงุน ูุชุฃุฎุฑ</a>
                </li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="reports.html"
                role="button"
                data-bs-toggle="dropdown"
              >
                ๐ ุงูุชูุงุฑูุฑ
              </a>
              <ul class="dropdown-menu dropdown-menu-dark">
                <li>
                  <a class="dropdown-item" href="reports.html">ุชูุงุฑูุฑ ุนุงูุฉ</a>
                </li>
                <li>
                  <a class="dropdown-item" href="personal-report.html"
                    >ุชูุฑูุฑ ุดุฎุตู</a
                  >
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="request.html"
                >ุงูุทูุจุงุช ุงูุงูููุงูู</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="alert2.html">ุงูุชูุจููุงุช</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <h4 class="mb-4 text-primary fw-bold">ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</h4>

      <div class="mb-3">
        <button
          class="btn btn-primary me-2"
          onclick="toggleSection('loanCollapse')"
        >
          ๐ ุทูุจุงุช ุงูุฅุนุงุฑุฉ
        </button>
        <button
          class="btn btn-primary"
          onclick="toggleSection('inactiveCollapse')"
        >
          ๐ซ ุงููุดุชุฑููู ุบูุฑ ุงูููุนููู
        </button>
      </div>

      <div id="loanCollapse" class="mt-3">
        <div class="card shadow border-0">
          <div class="card-header bg-primary text-white">ุทูุจุงุช ุงูุฅุนุงุฑุฉ</div>
          <div class="card-body">
            <div class="table-responsive">
              <table
                class="table table-bordered table-hover text-center align-middle"
              >
                <thead class="table-dark">
                  <tr>
                    <th>#</th>
                    <th>ุฑูู ุงูุชุตููู</th>
                    <th>ุงุณู ุงููุดุชุฑู</th>
                    <th>ุงุณู ุงููุชุงุจ</th>
                    <th>ุชุงุฑูุฎ ุงูุทูุจ</th>
                    <th>ุงูุทูู</th>
                    <th>ุงูุฅุฌุฑุงุก</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>12455</td>
                    <td>ุฃุญูุฏ ูุญููุฏ</td>
                    <td>ููุฏูุฉ ูู ุนูู ุงูุญุงุณูุจ</td>
                    <td>2025-09-15</td>
                    <td>17</td>
                    <td>
                      <button
                        class="btn btn-success btn-sm"
                        data-bs-toggle="modal"
                        data-bs-target="#confirmLoanModal"
                        data-loan-id="1"
                        data-member-name="ุฃุญูุฏ ูุญููุฏ"
                        data-book-name="ููุฏูุฉ ูู ุนูู ุงูุญุงุณูุจ"
                      >
                        ุฅุนุงุฑุฉ
                      </button>
                      <button
                        class="btn btn-danger btn-sm ms-1"
                        onclick="confirmCancel(event, 'loan', 1)"
                      >
                        ุฅูุบุงุก
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>74738</td>
                    <td>ูููู ุฎุงูุฏ</td>
                    <td>ุฑูุงูุฉ ูุฑุฉ ุงูุซูุฌ</td>
                    <td>2025-09-14</td>
                    <td>15</td>
                    <td>
                      <button
                        class="btn btn-success btn-sm"
                        data-bs-toggle="modal"
                        data-bs-target="#confirmLoanModal"
                        data-loan-id="2"
                        data-member-name="ูููู ุฎุงูุฏ"
                        data-book-name="ุฑูุงูุฉ ูุฑุฉ ุงูุซูุฌ"
                      >
                        ุฅุนุงุฑุฉ
                      </button>
                      <button
                        class="btn btn-danger btn-sm ms-1"
                        onclick="confirmCancel(event, 'loan', 2)"
                      >
                        ุฅูุบุงุก
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div id="inactiveCollapse" class="mt-3" style="display: none">
        <div class="card shadow border-0">
          <div class="card-header bg-primary text-white">
            ุงููุดุชุฑููู ุบูุฑ ุงูููุนููู
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table
                class="table table-bordered table-hover text-center align-middle"
              >
                <thead class="table-dark">
                  <tr>
                    <th>#</th>
                    <th>ุงุณู ุงููุดุชุฑู</th>
                    <th>ุฑูู ุงููุงุชู</th>
                    <th>ุงูุนููุงู</th>
                    <th>ุงููุธููุฉ</th>
                    <th>ุงูุฅุฌุฑุงุก</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>ูุญูุฏ ุงุญูุฏ</td>
                    <td>0599899068</td>
                    <td>ุนุฒูู</td>
                    <td>ูููุฏุณ ูุนูุงุฑู</td>
                    <td>
                      <button
                        class="btn btn-success btn-sm"
                        data-bs-toggle="modal"
                        data-bs-target="#receiptModal"
                        data-name="ูุญูุฏ ุงุญูุฏ"
                        data-phone="0599899068"
                      >
                        ุชูุนูู
                      </button>
                      <button
                        class="btn btn-danger btn-sm ms-1"
                        onclick="confirmCancel(event, 'member', 1)"
                      >
                        ุฅูุบุงุก
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>ุฒููุฉ ุนุทุง</td>
                    <td>0594567873</td>
                    <td>ุนุชูู</td>
                    <td>ูุนููุฉ</td>
                    <td>
                      <button
                        class="btn btn-success btn-sm"
                        data-bs-toggle="modal"
                        data-bs-target="#receiptModal"
                        data-name="ุฒููุฉ ุนุทุง"
                        data-phone="0594567873"
                      >
                        ุชูุนูู
                      </button>
                      <button
                        class="btn btn-danger btn-sm ms-1"
                        onclick="confirmCancel(event, 'member', 2)"
                      >
                        ุฅูุบุงุก
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="confirmLoanModal"
      tabindex="-1"
      aria-labelledby="confirmLoanModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title" id="confirmLoanModalLabel">
              ุชุฃููุฏ ุงูุฅุนุงุฑุฉ
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="ุฅุบูุงู"
            ></button>
          </div>
          <div class="modal-body">
            <p id="confirmLoanMessage">
              ูู ุฃูุช ูุชุฃูุฏ ูู ุฅุนุงุฑุฉ ูุฐุง ุงูุทูุจุ ุณูุชู ุชุณุฌูู ุงูุฅุนุงุฑุฉ ููุง ูููู
              ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก.
            </p>
            <p class="mt-3 text-muted">
              **ุชูุงุตูู ุงูุทูุจ:**
              <br />
              <span id="loanMemberName" class="fw-bold"></span>
              ูููุชุงุจ
              <span id="loanBookName" class="fw-bold"></span>
              (ุงูุทูุจ ุฑูู
              <span id="loanId" class="fw-bold"></span>).
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              ุฑุฌูุน
            </button>
            <button
              type="button"
              class="btn btn-success"
              id="confirmLoanButton"
              onclick="executeLoanConfirm()"
            >
              ุชุฃููุฏ ุงูุฅุนุงุฑุฉ
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="cancelConfirmModal"
      tabindex="-1"
      aria-labelledby="cancelConfirmModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="cancelConfirmModalLabel">
              ุชุฃููุฏ ุงูุฅูุบุงุก
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="ุฅุบูุงู"
            ></button>
          </div>
          <div class="modal-body">
            <p id="cancelMessage">
              ูู ุฃูุช ูุชุฃูุฏ ูู ุฅูุบุงุก ูุฐุง ุงูุทูุจ/ุงููุดุชุฑูุ ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง
              ุงูุฅุฌุฑุงุก.
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              ุฑุฌูุน
            </button>
            <button
              type="button"
              class="btn btn-danger"
              id="confirmCancelButton"
              onclick="executeCancel()"
            >
              ุชุฃููุฏ ุงูุฅูุบุงุก
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="receiptModal"
      tabindex="-1"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <div class="w-100">
              <h5 class="modal-title">ุชูุนูู ูุดุชุฑู</h5>
              <div
                class="d-flex flex-row justify-content-between align-items-center mt-2"
              ></div>
            </div>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body" id="receiptContent">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="A1-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#A1-tab-pane"
                  type="button"
                  role="tab"
                  aria-controls="A1-tab-pane"
                  aria-selected="true"
                >
                  ุจูุงูุงุช ุงููุดุชุฑู
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="A2-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#A2-tab-pane"
                  type="button"
                  role="tab"
                  aria-controls="A2-tab-pane"
                  aria-selected="false"
                >
                  ุจูุงูุงุช ุงููููู
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="A3-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#A3-tab-pane"
                  type="button"
                  role="tab"
                  aria-controls="A3-tab-pane"
                  aria-selected="false"
                >
                  ุชูุงุตูู ุงูุงุดุชุฑุงู
                </button>
              </li>
            </ul>

            <div class="tab-content p-3 bg-white shadow-sm" id="myTabContent">
              <div
                class="tab-pane fade show active"
                id="A1-tab-pane"
                role="tabpanel"
                aria-labelledby="A1-tab"
              >
                <div class="container">
                  <div class="row g-3">
                    <div class="col-md-3">
                      <label class="form-label">ุฑูู ุงููุดุชุฑู</label>
                      <input
                        id="subscriber_id"
                        name="subscriber_id"
                        type="text"
                        class="form-control"
                        value="SUB-0001"
                        readonly
                      />
                    </div>
                    <div class="col-md-6">
                      <label class="form-label required">ุงุณู ุงููุดุชุฑู</label>
                      <input
                        id="full_name"
                        name="full_name"
                        type="text"
                        class="form-control"
                        placeholder="ุงูุงุณู ุงููุงูู"
                        value="ูุญูุฏ ุงุญูุฏ"
                        readonly
                      />
                    </div>

                    <div class="col-md-4">
                      <label class="form-label">ุชุงุฑูุฎ ุงููููุงุฏ</label>
                      <input
                        name="birth_date"
                        id="birth_date"
                        type="date"
                        class="form-control"
                        value="1990-01-01"
                        readonly
                      />
                    </div>
                    <div class="col-md-4">
                      <label class="form-label">ุงูุฌูุณ</label>
                      <select name="gender" id="gender" class="form-select">
                        <option value="male" selected>ุฐูุฑ</option>
                        <option value="female">ุฃูุซู</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label class="form-label">ุฑูู ุงููููุฉ</label>
                      <input
                        name="id_number"
                        id="id_number"
                        type="text"
                        class="form-control"
                        value="987654321"
                        readonly
                      />
                    </div>
                    <div class="col-md-4">
                      <label class="form-label">ุงููุญุงูุธุฉ</label>
                      <select name="province" id="province" class="form-select">
                        <option value="ุฃุฑูุญุง ูุงูุฃุบูุงุฑ">ุฃุฑูุญุง ูุงูุฃุบูุงุฑ</option>
                        <option value="ุจูุช ูุญู">ุจูุช ูุญู</option>
                        <option value="ุงูุฎููู">ุงูุฎููู</option>
                        <option value="ุงููุฏุณ">ุงููุฏุณ</option>
                        <option value="ุฏูุฑ ุงูุจูุญ">ุฏูุฑ ุงูุจูุญ</option>
                        <option value="ุฑูุญ">ุฑูุญ</option>
                        <option value="ุณูููุช">ุณูููุช</option>
                        <option value="ุดูุงู ุบุฒุฉ">ุดูุงู ุบุฒุฉ</option>
                        <option value="ุทูุจุงุณ">ุทูุจุงุณ</option>
                        <option value="ุทูููุฑู" selected>ุทูููุฑู</option>
                        <option value="ุบุฒุฉ">ุบุฒุฉ</option>
                        <option value="ููููููุฉ">ููููููุฉ</option>
                        <option value="ุฎุงู ูููุณ">ุฎุงู ูููุณ</option>
                        <option value="ูุงุจูุณ">ูุงุจูุณ</option>
                        <option value="ุฑุงู ุงููู ูุงูุจูุฑุฉ">
                          ุฑุงู ุงููู ูุงูุจูุฑุฉ
                        </option>
                      </select>
                    </div>

                    <div class="col-md-4">
                      <label class="form-label">ุงููุธููุฉ</label>
                      <input
                        name="work"
                        id="work"
                        type="text"
                        class="form-control"
                        value="ูููุฏุณ ูุนูุงุฑู"
                        readonly
                      />
                    </div>
                    <div class="col-md-12">
                      <label class="form-label">ุงูุนููุงู</label>
                      <div class="row g-2">
                        <div class="col-md-4">
                          <input
                            name="address1"
                            id="address1"
                            type="text"
                            class="form-control"
                            placeholder="ุงููุฑูุฉ/ุงูุถุงุญูุฉ"
                            value="ุนุฒูู"
                            readonly
                          />
                        </div>
                        <div class="col-md-4">
                          <input
                            name="address2"
                            id="address2"
                            type="text"
                            class="form-control"
                            placeholder="ุงูุญู"
                            value="ุญู ุงูููุฑ"
                            readonly
                          />
                        </div>
                        <div class="col-md-4">
                          <input
                            name="address3"
                            id="address3"
                            type="text"
                            class="form-control"
                            placeholder="ุงูุดุงุฑุน"
                            value="ุดุงุฑุน ุงููุฆุฐูุฉ"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-12">
                      <label class="form-label">ุฃุฑูุงู ุงูููุจุงูู</label>
                      <div id="mobileNumbersGroup">
                        <div class="input-group mb-2 phone-group">
                          <input
                            name="phone_mobile[]"
                            type="tel"
                            class="form-control"
                            placeholder="ุฑูู ุงูููุจุงูู"
                            value="0599899068"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="A2-tab-pane"
                role="tabpanel"
                aria-labelledby="A2-tab"
              >
                <div class="container">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label class="form-label">ุงุณู ุงููููู</label>
                      <input
                        name="guarantor_name"
                        type="text"
                        class="form-control"
                        value="ุฎุงูุฏ ูุญููุฏ"
                        readonly
                      />
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">ุงููุธููุฉ</label>
                      <input
                        name="guarantor_work"
                        type="text"
                        class="form-control"
                        value="ูุฏุฑุณ"
                        readonly
                      />
                    </div>
                    <div class="col-md-12">
                      <label class="form-label">ุนููุงู ุงููููู</label>
                      <div class="row g-2">
                        <div class="col-md-4">
                          <input
                            name="guarantor_address1"
                            id="guarantor_address1"
                            type="text"
                            class="form-control"
                            placeholder="ุงููุฑูุฉ/ุงูุถุงุญูุฉ"
                            value="ุทูููุฑู"
                            readonly
                          />
                        </div>
                        <div class="col-md-4">
                          <input
                            name="guarantor_address2"
                            id="guarantor_address2"
                            type="text"
                            class="form-control"
                            placeholder="ุงูุญู"
                            value="ุงูุจูุฏุฉ ุงููุฏููุฉ"
                            readonly
                          />
                        </div>
                        <div class="col-md-4">
                          <input
                            name="guarantor_address3"
                            id="guarantor_address3"
                            type="text"
                            class="form-control"
                            placeholder="ุงูุดุงุฑุน"
                            value="ุดุงุฑุน ูุฑุนู"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-12">
                      <label class="form-label">ุฃุฑูุงู ุงูููุจุงูู ูููููู</label>
                      <div id="guarantorMobileNumbersGroup">
                        <div class="input-group mb-2 phone-group">
                          <input
                            name="guarantor_phone[]"
                            type="tel"
                            class="form-control"
                            placeholder="ุฑูู ุงูููุจุงูู"
                            value="0599123456"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="tab-pane fade"
                id="A3-tab-pane"
                role="tabpanel"
                aria-labelledby="A3-tab"
              >
                <form action="" method="">
                  <div class="container">
                    <div class="row g-3">
                      <div class="col-md-4">
                        <label class="form-label required">ูุฏุฉ ุงูุงุดุชุฑุงู</label>
                        <select
                          name="subscription_duration"
                          id="subscription_duration"
                          class="form-select"
                        >
                          <option value="yearly">ุณููู</option>
                          <option value="monthly" selected>ุดูุฑู</option>
                        </select>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ุชุงุฑูุฎ ุจุฏุงูุฉ ุงูุงุดุชุฑุงู</label>
                        <input
                          name="subscription_start_date"
                          id="subscription_start_date"
                          type="date"
                          class="form-control"
                          value="2025-10-01"
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ุชุงุฑูุฎ ููุงูุฉ ุงูุงุดุชุฑุงู</label>
                        <input
                          name="subscription_end_date"
                          id="subscription_end_date"
                          type="date"
                          class="form-control"
                          value="2026-10-01"
                          readonly
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ุงูุฑุณูู (ุดููู)</label>
                        <input
                          name="subscription_fee"
                          id="subscription_fee"
                          type="number"
                          class="form-control"
                          step="0.01"
                          value="35.00"
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ุทุฑููุฉ ุงูุฏูุน</label>
                        <select
                          name="payment_method"
                          id="payment_method"
                          class="form-select"
                        >
                          <option value="cash" selected>ููุฏุงู</option>
                        </select>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ุฑูู ุงููุตู</label>
                        <input
                          name="receipt_number"
                          id="receipt_number"
                          type="text"
                          class="form-control"
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ุฑูู ุงูุฏูุชุฑ</label>
                        <input
                          name="book_number"
                          id="book_number"
                          type="text"
                          class="form-control"
                        />
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">ููุน ุงูุงุดุชุฑุงู</label>
                        <select
                          name="subscription_type"
                          id="subscription_type"
                          class="form-select"
                        >
                          <option value="public_library">ููุชุจุฉ ุนุงูุฉ</option>
                          <option value="children_library">ููุชุจุฉ ุฃุทูุงู</option>
                        </select>
                      </div>

                      <div class="col-md-3">
                        <label class="form-label">ุชุตููู ุงููุดุชุฑู</label>
                        <select
                          name="category"
                          id="category"
                          class="form-select"
                        >
                          <option value="student">ุทุงูุจ</option>
                          <option value="regular" selected>ุดุฎุต</option>
                          <option value="municipality_employee">
                            ููุธู ุจูุฏูุฉ
                          </option>
                        </select>
                      </div>
                      <div class="col-12">
                        <label class="form-label">ููุงุญุธุงุช ุญูู ุงูุงุดุชุฑุงู</label>
                        <textarea
                          name="subscription_notes"
                          class="form-control"
                          rows="2"
                        ></textarea>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              ุฅุบูุงู
            </button>

            <button
              type="button"
              class="btn btn-success"
              onclick="printReceipt()"
            >
              ุทุจุงุนุฉ ูุชูุนูู
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // ูุชุบูุฑ ูุชุฎุฒูู ID ุทูุจ ุงูุฅุนุงุฑุฉ ุงูุญุงูู ุงููุฑุงุฏ ุชุฃููุฏู
      let currentLoanId = null;

      // ุฏุงูุฉ ุงูุชุจุฏูู ุจูู ุงูุฃูุณุงู
      function toggleSection(id) {
        const loan = document.getElementById("loanCollapse");
        const inactive = document.getElementById("inactiveCollapse");

        if (id === "loanCollapse") {
          loan.style.display = "block";
          inactive.style.display = "none";
        } else if (id === "inactiveCollapse") {
          loan.style.display = "none";
          inactive.style.display = "block";
        }
      }

      // ----------------------------------------------------------------
      // ูุนุงูุฌุฉ Modal ุชูุนูู ุงูุฅุนุงุฑุฉ (ุชูุช ุฅุถุงูุชูุง)
      // ----------------------------------------------------------------

      const confirmLoanModalEl = document.getElementById("confirmLoanModal");
      if (confirmLoanModalEl) {
        confirmLoanModalEl.addEventListener("show.bs.modal", (event) => {
          const button = event.relatedTarget;
          const loanId = button.getAttribute("data-loan-id");
          const memberName = button.getAttribute("data-member-name");
          const bookName = button.getAttribute("data-book-name");

          currentLoanId = loanId; // ุชุฎุฒูู ID ุงูุทูุจ

          // ุชุญุฏูุซ ุชูุงุตูู ุงูุทูุจ ูู Modal
          document.getElementById("loanId").textContent = loanId;
          document.getElementById("loanMemberName").textContent = memberName;
          document.getElementById("loanBookName").textContent = bookName;

          // ุชุญุฏูุซ ุฑุณุงูุฉ ุงูุชุฃููุฏ ูุชุจุฏู ุฃูุซุฑ ุชุฎุตูุตูุง
          document.getElementById("confirmLoanMessage").textContent =
            "ูู ุฃูุช ูุชุฃูุฏ ูู ุฅุนุงุฑุฉ ูุฐุง ุงูุทูุจุ ุณูุชู ุชุณุฌูู ุงูุฅุนุงุฑุฉ ููุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก.";
        });
      }

      // ุฏุงูุฉ ุชูููุฐ ุงูุฅุนุงุฑุฉ
      function executeLoanConfirm() {
        const id = currentLoanId;

        if (id) {
          // *ููุงุญุธุฉ*: ููุง ูุชู ูุถุน ููุฏ ูุนุงูุฌุฉ ุงูุฅุนุงุฑุฉ (ูุซูุงู: ุงุณุชุฏุนุงุก API ูุชุณุฌูู ุงูุฅุนุงุฑุฉ)
          console.log(`Executing loan confirmation for ID: ${id}`);

          // ุฅุบูุงู modal ุงูุชุฃููุฏ
          const modalEl = document.getElementById("confirmLoanModal");
          const modal = bootstrap.Modal.getInstance(modalEl);
          modal.hide();

          // ุฑุณุงูุฉ ูุฌุงุญ
          alert(`ุชูุช ุฅุนุงุฑุฉ ุงูุทูุจ ุฑูู ${id} ุจูุฌุงุญ!`);

          // ุชุญุฏูุซ ุงููุงุฌูุฉ (ูุซูุงู: ุฅุฒุงูุฉ ุงูุตู ูู ุงูุฌุฏูู) - ูุซุงู ุงูุชุฑุงุถู:
          // window.location.reload();
        }
      }

      // ----------------------------------------------------------------
      // ูุนุงูุฌุฉ Modal ุชูุนูู ุงููุดุชุฑู (ููุฌูุฏ ูุณุจูุงู)
      // ----------------------------------------------------------------

      const receiptModal = document.getElementById("receiptModal");
      if (receiptModal) {
        receiptModal.addEventListener("show.bs.modal", (event) => {
          const button = event.relatedTarget;
          const memberName = button.getAttribute("data-name");
          const memberPhone = button.getAttribute("data-phone");

          const modalTitleName = receiptModal.querySelector("#memberName");
          const modalTitlePhone = receiptModal.querySelector("#memberPhone");

          // ุงูุชุญูู ูู ูุฌูุฏ ุงูุนูุงุตุฑ ูุจู ุงูุชุญุฏูุซ
          if (modalTitleName && modalTitlePhone) {
            modalTitleName.textContent = memberName;
            modalTitlePhone.textContent = memberPhone;
          }

          // *ููุงุญุธุฉ*: ูู ุชุทุจูู ุญููููุ ุณูุชู ุฌูุจ ุจููุฉ ุงูุจูุงูุงุช (ุงูุนููุงูุ ุงูููููุ ุชูุงุตูู ุงูุงุดุชุฑุงู)
          // ุนุจุฑ ุงุณุชุฏุนุงุก AJAX ุจูุงุกู ุนูู ูุนุฑู ุงููุดุชุฑู/ุฑูู ุงููุงุชู ูุชุนุจุฆุชูุง ูู ุงูุญููู ููุง.
        });
      }

      // ----------------------------------------------------------------
      // ูุนุงูุฌุฉ Modal ุชุฃููุฏ ุงูุฅูุบุงุก (ููุฌูุฏ ูุณุจูุงู)
      // ----------------------------------------------------------------

      let currentCancelType = null;
      let currentCancelId = null;

      function confirmCancel(event, type, id) {
        event.preventDefault(); // ููุน ุงูุฅุฌุฑุงุก ุงูุงูุชุฑุงุถู ููุฒุฑ

        currentCancelType = type;
        currentCancelId = id;

        const messageElement = document.getElementById("cancelMessage");
        let message = "";

        if (type === "loan") {
          message = `ูู ุฃูุช ูุชุฃูุฏ ูู ุฅูุบุงุก ุทูุจ ุงูุฅุนุงุฑุฉ ุฑูู ${id}ุ ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก.`;
        } else if (type === "member") {
          message = `ูู ุฃูุช ูุชุฃูุฏ ูู ุฅูุบุงุก ุชูุนูู ุงููุดุชุฑู ุฑูู ${id}ุ ูุฐุง ุณูุคุฏู ุฅูู ุญุฐูู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.`;
        }

        messageElement.textContent = message;

        const cancelModal = new bootstrap.Modal(
          document.getElementById("cancelConfirmModal")
        );
        cancelModal.show();
      }

      // ุฏุงูุฉ ูุชูููุฐ ุงูุฅูุบุงุก
      function executeCancel() {
        const type = currentCancelType;
        const id = currentCancelId;

        // *ููุงุญุธุฉ*: ููุง ูุชู ูุถุน ููุฏ ูุนุงูุฌุฉ ุงูุฅูุบุงุก
        console.log(`Executing cancel for ${type} with ID: ${id}`);

        // ุฅุบูุงู modal ุงูุชุฃููุฏ
        const cancelModalEl = document.getElementById("cancelConfirmModal");
        const cancelModal = bootstrap.Modal.getInstance(cancelModalEl);
        cancelModal.hide();

        // ุฑุณุงูุฉ ูุฌุงุญ
        alert(
          `ุชู ุฅูุบุงุก ${
            type === "loan" ? "ุทูุจ ุงูุฅุนุงุฑุฉ" : "ุงููุดุชุฑู"
          } ุฑูู ${id} ุจูุฌุงุญ!`
        );

        // ุชุญุฏูุซ ุงููุงุฌูุฉ (ูุซุงู ุงูุชุฑุงุถู)
        // window.location.reload();
      }

      // ----------------------------------------------------------------
      // ุฏูุงู ุงูุชูุนูู ูุงูุทุจุงุนุฉ
      // ----------------------------------------------------------------

      // ุฏุงูุฉ ุงูุทุจุงุนุฉ ูุงูุชูุนูู ุงูุงูุชุฑุงุถูุฉ
      function printReceipt() {
        alert("ุณูุชู ุทุจุงุนุฉ ุงููุตู ูุญูุธ ุงูุจูุงูุงุช ูุชูุนูู ุงููุดุชุฑู.");
        const modalEl = document.getElementById("receiptModal");
        const modal = bootstrap.Modal.getInstance(modalEl);
        modal.hide();
      }
      const category = document.getElementById("category");
      const feeInput = document.getElementById("subscription_fee");

      function updateSubscriptionFee() {
        const selectedCategory = category.value;
        let fee = 35.0;

        if (selectedCategory === "municipality_employee") {
          fee = 0.0;
        } else if (selectedCategory === "student") {
          fee = 25.0;
        } else if (selectedCategory === "regular") {
          fee = 35.0;
        }

        feeInput.value = fee.toFixed(2);
      }

      category.addEventListener("change", updateSubscriptionFee);

      // ููุงุญุธุฉ: ุชู ุญุฐู ุงูุฏูุงู ุบูุฑ ุงููุณุชุฎุฏูุฉ (addMobileField, removeMobileField, saveActivation)
    </script>
  </body>
</html>
