<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة تحكم المدير</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
#wrapper{display:flex;min-height:100vh}
#sidebar-wrapper{min-height:100vh;width:15rem;background:#343a40;color:#fff;}
#sidebar-wrapper .sidebar-heading{padding:1rem 0;text-align:center;font-size:1.2rem;}
.list-group-item-action{border-right:0;border-left:0;border-radius:0;}
.list-group-item-action.active{background-color:#0d6efd !important;border-color:#0d6efd !important;}
#employeeManagement .nav-tabs{border-bottom:none;margin-bottom:1rem;}
#employeeManagement .nav-link.active{border-color:#dee2e6 #dee2e6 #fff;}
</style>
</head>
<body>
<div id="wrapper">
<div id="sidebar-wrapper">
<div class="sidebar-heading border-bottom border-secondary">
<img src="./img/slogan.png" alt="شعار المكتبة" class="mb-2" width="80"/><br>
<i class="fas fa-tools me-2"></i> لوحة الإدارة
</div>
<div class="list-group list-group-flush">
<a class="list-group-item list-group-item-action bg-dark text-white active" id="activeUsers-tab" data-bs-toggle="tab" href="#activeUsers"><i class="fas fa-users-cog me-2"></i> المستخدمون الفعالون</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="employeeManagement-tab" data-bs-toggle="tab" href="#employeeManagement"><i class="fas fa-user-tie me-2"></i> إدارة الموظفين</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="viewEmployees-tab" data-bs-toggle="tab" href="#viewEmployees"><i class="fas fa-list-alt me-2"></i> عرض الموظفين</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="loginLogs-tab" data-bs-toggle="tab" href="#loginLogs"><i class="fas fa-sign-in-alt me-2"></i> معلومات دخول المستخدمين</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="backup-tab" data-bs-toggle="tab" href="#backup"><i class="fas fa-database me-2"></i> النسخ الاحتياطي</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="formBuilder-tab" data-bs-toggle="tab" href="#formBuilder"><i class="fas fa-pen-square me-2"></i> منشئ النماذج</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="reportBuilder-tab" data-bs-toggle="tab" href="#reportBuilder"><i class="fas fa-chart-line me-2"></i> منشئ التقارير</a>
<a class="list-group-item list-group-item-action bg-dark text-white" id="logout-tab"><i class="fas fa-sign-out-alt me-2"></i> تسجيل الخروج</a>
</div>
</div>

<div id="page-content-wrapper" class="flex-grow-1">
<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
<div class="container-fluid"><span class="navbar-brand mb-0 h1">لوحة تحكم المدير</span></div>
</nav>

<div class="container-fluid p-4">
<div class="tab-content">
<!-- المستخدمون الفعالون -->
<div class="tab-pane fade show active" id="activeUsers">
<h2 class="mb-4"><i class="fas fa-users-cog me-2"></i> المستخدمون الفعالون</h2>
<div class="card shadow">
<div class="card-body">
<input type="text" class="form-control mb-3" placeholder="ابحث باسم المستخدم ...">
<div class="table-responsive">
<table class="table table-hover table-striped">
<thead><tr><th>الاسم</th><th>البريد</th><th>الدور</th><th>آخر نشاط</th><th>الحالة</th></tr></thead>
<tbody><tr><td>أحمد محمد</td><td>ahmad@example.com</td><td>مدير</td><td>الآن</td><td><span class="badge bg-success">متصل</span></td></tr></tbody>
</table>
</div>
</div>
</div>
</div>

<!-- إدارة الموظفين -->
<div class="tab-pane fade" id="employeeManagement">
<h2 class="mb-4"><i class="fas fa-user-tie me-2"></i> إدارة الموظفين</h2>
<ul class="nav nav-tabs mb-3" id="employeeSubTabs">
<li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#addEmployee">إضافة موظف</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#editEmployee">تعديل موظف</button></li>
</ul>
<div class="tab-content">
<!-- إضافة موظف -->
<div class="tab-pane fade show active" id="addEmployee">
<form id="addEmpForm">
<div class="row g-3">
<div class="col-md-3"><label class="form-label">الاسم الأول</label><input type="text" class="form-control" required id="firstName"/></div>
<div class="col-md-3"><label class="form-label">اسم الأب</label><input type="text" class="form-control" required id="fatherName"/></div>
<div class="col-md-3"><label class="form-label">اسم الجد</label><input type="text" class="form-control" id="grandfatherName"/></div>
<div class="col-md-3"><label class="form-label">اسم العائلة</label><input type="text" class="form-control" required id="familyName"/></div>
<div class="col-md-4"><label class="form-label">رقم الموظف</label><input type="number" class="form-control" required id="empNumber"/></div>
<div class="col-md-4"><label class="form-label">رقم الهوية</label><input type="text" class="form-control" required id="idNumber"/></div>
<div class="col-md-4"><label class="form-label">اسم المستخدم</label><input type="text" class="form-control" required id="username"/></div>
<div class="col-md-4"><label class="form-label">البريد الإلكتروني</label><input type="email" class="form-control" required id="email"/></div>
<div class="col-md-4"><label class="form-label">كلمة السر</label><input type="password" class="form-control" required id="password"/></div>
</div>
<div class="mt-3 text-end"><button type="submit" class="btn btn-success"><i class="fas fa-save me-1"></i> حفظ الموظف</button></div>
</form>
</div>

<!-- تعديل موظف -->
<div class="tab-pane fade" id="editEmployee">
<form id="editEmpForm">
<div class="row g-3">
<div class="col-md-4"><label class="form-label">اختر الموظف</label><select class="form-select" id="selectEmp"></select></div>
<div class="col-md-4"><label class="form-label">الاسم الجديد</label><input type="text" class="form-control" id="newName"/></div>
<div class="col-md-4"><label class="form-label">البريد الإلكتروني الجديد</label><input type="email" class="form-control" id="newEmail"/></div>
<div class="col-md-4"><label class="form-label">كلمة المرور الجديدة</label><input type="password" class="form-control" id="newPassword"/></div>
</div>
<div class="mt-3 text-end"><button type="submit" class="btn btn-primary"><i class="fas fa-edit me-1"></i> تعديل الموظف</button></div>
</form>
</div>
</div>
</div>

<!-- عرض الموظفين -->
<div class="tab-pane fade" id="viewEmployees">
<h2 class="mb-4"><i class="fas fa-list-alt me-2"></i> قائمة الموظفين</h2>
<div class="table-responsive">
<table class="table table-hover table-striped" id="empTable">
<thead><tr><th>رقم الموظف</th><th>الاسم الكامل</th><th>البريد الإلكتروني</th><th>الدور</th><th>الحالة</th><th>الإجراءات</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>

<!-- معلومات دخول المستخدمين -->
<div class="tab-pane fade" id="loginLogs">
<h2 class="mb-4"><i class="fas fa-sign-in-alt me-2"></i> معلومات دخول المستخدمين</h2>
<div class="table-responsive">
<table class="table table-hover">
<thead><tr><th>الوقت</th><th>المستخدم</th><th>عنوان IP</th><th>النتيجة</th></tr></thead>
<tbody>
<tr><td>2025-10-06 10:30</td><td>سارة علي</td><td>192.168.1.50</td><td><span class="badge bg-success">نجاح</span></td></tr>
<tr><td>2025-10-06 10:29</td><td>مجهول</td><td>203.0.113.12</td><td><span class="badge bg-danger">فشل</span></td></tr>
</tbody>
</table>
</div>
</div>

<!-- النسخ الاحتياطي -->
<div class="tab-pane fade" id="backup">
<h2 class="mb-4"><i class="fas fa-database me-2"></i> النسخ الاحتياطي</h2>
<div class="row">
<div class="col-md-6">
<div class="card shadow mb-4">
<div class="card-header bg-primary text-white"><i class="fas fa-cog me-2"></i> الإجراءات</div>
<div class="card-body">
<p>حالة آخر نسخة: <span class="badge bg-info">2025-10-05 18:00</span></p>
<button class="btn btn-success me-2"><i class="fas fa-sync-alt me-1"></i> إنشاء نسخة الآن</button>
<button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#restoreModal"><i class="fas fa-undo me-1"></i> استعادة</button>
</div>
</div>
</div>
<div class="col-md-6">
<div class="card shadow">
<div class="card-header bg-secondary text-white"><i class="fas fa-list me-2"></i> النسخ المتاحة</div>
<ul class="list-group list-group-flush">
<li class="list-group-item d-flex justify-content-between align-items-center">Database_2025_10_05.zip<button class="btn btn-sm btn-outline-primary">تنزيل</button></li>
<li class="list-group-item d-flex justify-content-between align-items-center">Full_System_2025_10_01.zip<button class="btn btn-sm btn-outline-primary">تنزيل</button></li>
</ul>
</div>
</div>
</div>
</div>

<!-- منشئ النماذج -->
<div class="tab-pane fade" id="formBuilder">
<h2 class="mb-4"><i class="fas fa-pen-square me-2"></i> منشئ النماذج</h2>
<div class="card shadow p-3">
<h5 class="card-title">إنشاء حقل جديد</h5>
<div class="row g-3">
<div class="col-md-4"><label class="form-label">نوع الحقل</label>
<select class="form-select" id="fieldType">
<option>نص قصير</option><option>نص طويل (مساحة نصية)</option><option>قائمة منسدلة</option><option>زر اختيار (Radio)</option></select>
</div>
<div class="col-md-4"><label class="form-label">عنوان الحقل (Label)</label><input type="text" class="form-control" id="fieldLabel" placeholder="مثال: الاسم الكامل"></div>
<div class="col-md-4 d-flex align-items-end">
<div class="form-check me-3"><input class="form-check-input" type="checkbox" id="requiredCheck"><label class="form-check-label" for="requiredCheck">إلزامي</label></div>
<button class="btn btn-success" id="addFieldBtn"><i class="fas fa-plus me-1"></i> إضافة</button>
</div>
</div>
<hr>
<h6>معاينة النموذج</h6>
<div id="form-preview" class="border p-3 bg-light rounded"><p class="text-muted">ستظهر الحقول هنا أثناء إنشائها...</p></div>
</div>
</div>

<!-- منشئ التقارير -->
<div class="tab-pane fade" id="reportBuilder">
<h2 class="mb-4"><i class="fas fa-chart-line me-2"></i> منشئ التقارير</h2>
<div class="card shadow p-4">
<h5 class="card-title">بناء تقرير جديد</h5>
<div class="row g-3">
<div class="col-md-4"><label class="form-label">مصدر البيانات</label><select class="form-select"><option>المستخدمون</option><option>الطلبات/المبيعات</option><option>المنتجات</option></select></div>
<div class="col-md-4"><label class="form-label">تاريخ البداية</label><input type="date" class="form-control"></div>
<div class="col-md-4"><label class="form-label">الفلاتر/الشروط</label><input type="text" class="form-control" placeholder="مثال: الحالة = مكتمل"></div>
<div class="col-12"><label class="form-label">الأعمدة المطلوبة</label><input type="text" class="form-control" placeholder="مثال: الاسم، السعر، الكمية، التاريخ"></div>
</div>
<div class="mt-4 text-end">
<button class="btn btn-primary me-2"><i class="fas fa-search me-1"></i> عرض التقرير</button>
<button class="btn btn-success"><i class="fas fa-file-excel me-1"></i> تصدير (Excel)</button>
</div>
</div>
<h5 class="mt-4">نتائج التقرير (المعاينة)</h5>
<div class="card shadow mt-3 p-3"><p class="text-muted text-center">سيظهر جدول نتائج التقرير هنا.</p></div>
</div>

</div>
</div>
</div>
</div>

<!-- مودال الاستعادة -->
<div class="modal fade" id="restoreModal" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">استعادة النسخ الاحتياطي</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<p>*تحذير*: الاستعادة ستستبدل البيانات الحالية. هل أنت متأكد؟</p>
<select class="form-select">
<option>حدد ملف النسخة للاستعادة...</option>
<option>Database_2025_10_05.zip</option>
<option>Full_System_2025_10_01.zip</option>
</select>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
<button type="button" class="btn btn-danger">تأكيد الاستعادة</button>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// بيانات الموظفين
let employees = [
{id:12345,name:"أحمد محمد الخالد",email:"ahmad@example.com",role:"مدير قسم",status:"فعال"},
{id:98765,name:"سارة علي العبدالله",email:"sara.ali@example.com",role:"موظف إدخال",status:"فعال"}
];

const empTableBody = document.querySelector("#empTable tbody");
const selectEmp = document.getElementById("selectEmp");
function renderEmployees(){
empTableBody.innerHTML="";
selectEmp.innerHTML='<option value="">اختر الموظف</option>';
employees.forEach(emp=>{
empTableBody.innerHTML+=`<tr>
<td>${emp.id}</td><td>${emp.name}</td><td>${emp.email}</td><td>${emp.role}</td>
<td><span class="badge bg-success">${emp.status}</span></td>
<td><button class="btn btn-sm btn-primary edit-btn" data-id="${emp.id}"><i class="fas fa-edit me-1"></i> تعديل</button></td>
</tr>`;
selectEmp.inner